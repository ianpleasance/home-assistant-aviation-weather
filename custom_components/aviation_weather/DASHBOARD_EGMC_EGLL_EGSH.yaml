title: Aviation Weather
views:
  - title: Weather Reports
    path: weather-reports
    icon: mdi:airplane
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: >
              # ðŸ›¬ {{ states('sensor.egmc_aerodrome_name_2') }} ({{
              states('sensor.egmc_metar_icao_code_2') }})


              **Location:** {{ states('sensor.egmc_latitude') | float | abs }}Â°{{ 'N' if states('sensor.egmc_latitude') | float >= 0 else 'S' }}, {{ states('sensor.egmc_longitude') | float | abs }}Â°{{ 'E' if states('sensor.egmc_longitude') | float >= 0 else 'W' }}

              **Elevation:** {{ states('sensor.egmc_elevation') }}m
          - type: entities
            title: Current Conditions
            entities:
              - entity: sensor.egmc_metar_temperature
                name: Temperature
                icon: mdi:thermometer
              - entity: sensor.egmc_metar_dew_point
                name: Dew Point
                icon: mdi:water-percent
              - entity: sensor.egmc_metar_wind_speed
                name: Wind Speed
                icon: mdi:weather-windy
              - entity: sensor.egmc_metar_wind_direction
                name: Wind Direction
                icon: mdi:compass
              - entity: sensor.egmc_metar_wind_gust
                name: Wind Gust
                icon: mdi:weather-windy-variant
              - entity: sensor.egmc_metar_visibility
                name: Visibility
                icon: mdi:eye
              - entity: sensor.egmc_metar_altimeter
                name: Altimeter
                icon: mdi:gauge
              - entity: sensor.egmc_metar_report_time_2
                name: Report Time
                icon: mdi:clock
          - type: markdown
            title: METAR Report
            content: >
              {{ state_attr('sensor.egmc_metar_readable_html',
              'formatted_output') }}
          - type: markdown
            title: TAF Forecast
            content: >
              {{ state_attr('sensor.egmc_taf_readable_text', 'formatted_output')
              }}
          - type: markdown
            content: |
              **Raw METAR:** `{{ states('sensor.egmc_metar_raw_metar') }}`

              **Raw TAF:** `{{ states('sensor.egmc_taf_raw_taf') }}`
      - type: vertical-stack
        cards:
          - type: markdown
            content: >
              # ðŸ›¬ {{ states('sensor.egll_aerodrome_name_2') }} ({{
              states('sensor.egll_metar_icao_code_2') }})


              **Location:** {{ states('sensor.egll_latitude') | float | abs }}Â°{{ 'N' if states('sensor.egll_latitude') | float >= 0 else 'S' }}, {{ states('sensor.egll_longitude') | float | abs }}Â°{{ 'E' if states('sensor.egll_longitude') | float >= 0 else 'W' }}

              **Elevation:** {{ states('sensor.egll_elevation') }}m
          - type: entities
            title: Current Conditions
            entities:
              - entity: sensor.egll_metar_temperature
                name: Temperature
                icon: mdi:thermometer
              - entity: sensor.egll_metar_dew_point
                name: Dew Point
                icon: mdi:water-percent
              - entity: sensor.egll_metar_wind_speed
                name: Wind Speed
                icon: mdi:weather-windy
              - entity: sensor.egll_metar_wind_direction
                name: Wind Direction
                icon: mdi:compass
              - entity: sensor.egll_metar_wind_gust
                name: Wind Gust
                icon: mdi:weather-windy-variant
              - entity: sensor.egll_metar_visibility
                name: Visibility
                icon: mdi:eye
              - entity: sensor.egll_metar_altimeter
                name: Altimeter
                icon: mdi:gauge
              - entity: sensor.egll_metar_report_time_2
                name: Report Time
                icon: mdi:clock
          - type: markdown
            title: METAR Report
            content: >
              {{ state_attr('sensor.egll_metar_readable_html',
              'formatted_output') }}
          - type: markdown
            title: TAF Forecast
            content: >
              {{ state_attr('sensor.egll_taf_readable_html', 'formatted_output')
              }}
          - type: markdown
            content: |
              **Raw METAR:** `{{ states('sensor.egll_metar_raw_metar') }}`

              **Raw TAF:** `{{ states('sensor.egll_taf_raw_taf') }}`
      - type: vertical-stack
        cards:
          - type: markdown
            content: >
              # ðŸ›¬ {{ states('sensor.egsh_aerodrome_name_2') }} ({{
              states('sensor.egsh_metar_icao_code_2') }})


              **Location:** {{ states('sensor.egsh_latitude') | float | abs }}Â°{{ 'N' if states('sensor.egsh_latitude') | float >= 0 else 'S' }}, {{ states('sensor.egsh_longitude') | float | abs }}Â°{{ 'E' if states('sensor.egsh_longitude') | float >= 0 else 'W' }}

              **Elevation:** {{ states('sensor.egsh_elevation') }}m
          - type: entities
            title: Current Conditions
            entities:
              - entity: sensor.egsh_metar_temperature
                name: Temperature
                icon: mdi:thermometer
              - entity: sensor.egsh_metar_dew_point
                name: Dew Point
                icon: mdi:water-percent
              - entity: sensor.egsh_metar_wind_speed
                name: Wind Speed
                icon: mdi:weather-windy
              - entity: sensor.egsh_metar_wind_direction
                name: Wind Direction
                icon: mdi:compass
              - entity: sensor.egsh_metar_wind_gust
                name: Wind Gust
                icon: mdi:weather-windy-variant
              - entity: sensor.egsh_metar_visibility
                name: Visibility
                icon: mdi:eye
              - entity: sensor.egsh_metar_altimeter
                name: Altimeter
                icon: mdi:gauge
              - entity: sensor.egsh_metar_report_time_2
                name: Report Time
                icon: mdi:clock
          - type: markdown
            title: METAR Report
            content: >
              {{ state_attr('sensor.egsh_metar_readable_html',
              'formatted_output') }}
          - type: markdown
            title: TAF Forecast
            content: >
              {{ state_attr('sensor.egsh_taf_readable_text', 'formatted_output')
              }}
          - type: markdown
            content: |
              **Raw METAR:** `{{ states('sensor.egsh_metar_raw_metar') }}`

              **Raw TAF:** `{{ states('sensor.egsh_taf_raw_taf') }}`
  - title: Comparison
    path: comparison
    icon: mdi:compare
    cards:
      - type: history-graph
        title: Temperature Comparison (24h)
        entities:
          - entity: sensor.egmc_metar_temperature
            name: Southend
          - entity: sensor.egll_metar_temperature
            name: Heathrow
          - entity: sensor.egsh_metar_temperature
            name: Norwich
        hours_to_show: 24
        refresh_interval: 0
      - type: history-graph
        title: Wind Speed Comparison (24h)
        entities:
          - entity: sensor.egmc_metar_wind_speed
            name: Southend
          - entity: sensor.egll_metar_wind_speed
            name: Heathrow
          - entity: sensor.egsh_metar_wind_speed
            name: Norwich
        hours_to_show: 24
        refresh_interval: 0
      - type: markdown
        title: Quick Comparison
        content: >
          | Airport | Temp | Wind | Visibility | Pressure |

          |---------|------|------|------------|----------|

          | **Southend** | {{ states('sensor.egmc_metar_temperature') }}Â°C | {{
          states('sensor.egmc_metar_wind_speed') }}kt @ {{
          states('sensor.egmc_metar_wind_direction') }}Â° | {{
          states('sensor.egmc_metar_visibility') }} | {{
          states('sensor.egmc_metar_altimeter') }} inHg |

          | **Heathrow** | {{ states('sensor.egll_metar_temperature') }}Â°C | {{
          states('sensor.egll_metar_wind_speed') }}kt @ {{
          states('sensor.egll_metar_wind_direction') }}Â° | {{
          states('sensor.egll_metar_visibility') }} | {{
          states('sensor.egll_metar_altimeter') }} inHg |

          | **Norwich** | {{ states('sensor.egsh_metar_temperature') }}Â°C | {{
          states('sensor.egsh_metar_wind_speed') }}kt @ {{
          states('sensor.egsh_metar_wind_direction') }}Â° | {{
          states('sensor.egsh_metar_visibility') }} | {{
          states('sensor.egsh_metar_altimeter') }} inHg |
      - type: entities
        title: Parsed Wind Data - Southend (EGMC)
        entities:
          - entity: sensor.egmc_metar_parsed_wind_direction
            name: Wind Direction (Parsed)
          - entity: sensor.egmc_metar_parsed_wind_speed
            name: Wind Speed (Parsed)
          - entity: sensor.egmc_metar_parsed_wind_gust
            name: Wind Gust (Parsed)
          - entity: sensor.egmc_metar_parsed_wind_calm
            name: Calm Winds
          - entity: sensor.egmc_metar_parsed_cavok
            name: CAVOK
          - entity: sensor.egmc_metar_parsed_sky_clear
            name: Sky Clear
      - type: entities
        title: Parsed Wind Data - Heathrow (EGLL)
        entities:
          - entity: sensor.egll_metar_parsed_wind_direction
            name: Wind Direction (Parsed)
          - entity: sensor.egll_metar_parsed_wind_speed
            name: Wind Speed (Parsed)
          - entity: sensor.egll_metar_parsed_wind_gust
            name: Wind Gust (Parsed)
          - entity: sensor.egll_metar_parsed_wind_calm
            name: Calm Winds
          - entity: sensor.egll_metar_parsed_cavok
            name: CAVOK
          - entity: sensor.egll_metar_parsed_sky_clear
            name: Sky Clear
      - type: entities
        title: Parsed Wind Data - Norwich (EGSH)
        entities:
          - entity: sensor.egsh_metar_parsed_wind_direction
            name: Wind Direction (Parsed)
          - entity: sensor.egsh_metar_parsed_wind_speed
            name: Wind Speed (Parsed)
          - entity: sensor.egsh_metar_parsed_wind_gust
            name: Wind Gust (Parsed)
          - entity: sensor.egsh_metar_parsed_wind_calm
            name: Calm Winds
          - entity: sensor.egsh_metar_parsed_cavok
            name: CAVOK
          - entity: sensor.egsh_metar_parsed_sky_clear
            name: Sky Clear
      - type: entities
        title: TAF Validity - All Airports
        entities:
          - type: section
            label: Southend (EGMC)
          - entity: sensor.egmc_taf_parsed_valid_from
            name: Valid From
          - entity: sensor.egmc_taf_parsed_valid_to
            name: Valid To
          - entity: sensor.egmc_taf_parsed_is_amended
            name: Amended
          - type: section
            label: Heathrow (EGLL)
          - entity: sensor.egll_taf_parsed_valid_from
            name: Valid From
          - entity: sensor.egll_taf_parsed_valid_to
            name: Valid To
          - entity: sensor.egll_taf_parsed_is_amended
            name: Amended
          - type: section
            label: Norwich (EGSH)
          - entity: sensor.egsh_taf_parsed_valid_from
            name: Valid From
          - entity: sensor.egsh_taf_parsed_valid_to
            name: Valid To
          - entity: sensor.egsh_taf_parsed_is_amended
            name: Amended
  - title: Raw Data
    path: raw-data
    icon: mdi:code-braces
    cards:
      - type: markdown
        title: Raw METAR Reports
        content: |
          ## Southend (EGMC)
          ```
          {{ states('sensor.egmc_metar_raw_metar') }}
          ```
          ## Heathrow (EGLL)
          ```
          {{ states('sensor.egll_metar_raw_metar') }}
          ```
          ## Norwich (EGSH)
          ```
          {{ states('sensor.egsh_metar_raw_metar') }}
          ```
      - type: markdown
        title: Raw TAF Forecasts
        content: |
          ## Southend (EGMC)
          ```
          {{ states('sensor.egmc_taf_raw_taf') }}
          ```
          ## Heathrow (EGLL)
          ```
          {{ states('sensor.egll_taf_raw_taf') }}
          ```
          ## Norwich (EGSH)
          ```
          {{ states('sensor.egsh_taf_raw_taf') }}
          ```
